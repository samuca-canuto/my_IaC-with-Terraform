resource "aws_launch_template" "ec2_lt" {
  name_prefix = "ec2-template"
  image_id = "ami-0c02fb55956c7d316"  # Amazon Linux 2 (us-east-1)



  instance_type = "t2.micro"

//essa é uma chave existente mas é possivel criar uma chave
  key_name = "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBcS94SWZQZUFWa0I4Vi8vNEY3bE16RjMyWDVJSC9jODBqTFVSbWpZVHhKcGxsTE8xCkZ1VHQzZFc3VGhCZjBmeThFQThBbnRnRVpiT215Z3VOMHBNZUl1U0dCUXdvb2Y1S1JZRjlmYkhuWmYreVlGMkkKOW4wQ09wQXF4Z1d3eGV1TFhtL0o5RVF0aWNCOUkxVFZhWlVUK2FPV3Z1ZjlnM0RuOE9FaEZjaWZabTF2d1BQSQpYb29jazJkYWgwUmt5OE9LM2FnMUZMZFpncHhma1dOYzMvT2pFa2JvTUdoYWZwcGxTVHZ0WFhEQTc5Q1hEc1VqCi9BVVozNERqSm16N2Q5RVlIWVBTZkVGbDR4RExueEFXK0pZUU9UYVpNNTRVTTZZZ0RPRlZrZ01MdlZLdWdSbEkKcUJIUjhaZGhXam5ja05rQmNFRGJ4SlMzVEJlN0tLQ1djNGZTendJREFRQUJBb0lCQUVVbTBFS25CWXdvcTVaNgpqbGVEb3hSOUoyWHdBcFNUN3M0d3M5NHNwakFqNEhvMDg3Zzcza1NXL3BQNTAzMU1RSlc0WW9oNzFQRExsbUdnCjJhcDBpdVordWtCblRpTXNhdEtkcVVhVDlMVzNaUktJS1Z6cWtLM1piOGxsV2xtS1J1UjIwRjROMTcyT2p3SlkKeHVLSUZac0hvc0lwNTI0bFJLMCs2QjJwS0NaM2EzaTVsdmZoWndOS094akRiUG5WbXN0WFovTWpkS2czV1NZTgplY0crNC9tdUlFTjhVQmxKekMyVldhL0RPd05KNnJQTGxyZHE2MGtncFYvY1hwUDQ0UUNEZ2lUenFjcEZ0ZnZwCk1NY1ZYbkRtT0pacUhmT2Y5SVpzV1l6OXowcUF0L0VIK1p1MW9ub0I5Wlhmcm5sRjdCOFZoY2VwOFNJeUEyZXQKWGl6WVJxa0NnWUVBMVJZYkhUU3JkeEJYRFhPd1NQL0xkdmw3MkdEZ0NsZEoxY3Rid25ZYThvenRDdjdGZWlsWQpOblVMN3lkaXRxYXlQNUpDL0loL1M3WFNwNkY1RElLTmduVzRib3Bnb09rZlZRM2FFVnFQQmpTeWZsd0xMbVdTCjYrVnp0UndwNXdpWTBQaVE1V2NxakdxMFA2TGZCR2c2Z1JNcGNWanVGQXM0cDJjYmJXN1pIaDBDZ1lFQXpwOHQKbEtpM0FxY1ZvL3luNFpKOVRabFR0SDNleXJMYk9ZWVVXZUpmeWY5d1AzbUFrU1BseWVwYUd0d09UZjUvajFJKwp6Z1BRUEIzaklyRk42TldVTmFyY0JwdThxVW9KM1dBRE55dTlJY3dmclJoaXJiYUwwdC9BamViQW9UTmU1a1VCCkxZWGVLclVPODBlM21ZNCtjZ08zaDZ1cWNEQ2xXc0dVcGJwS1VOc0NnWUFaOWx5TlhXcDYwa25aQUx4ODJIWEEKNURyYnJVbisySTNOZDc2UlhmU0FrdjBhdHRuMnZXemJEYjNMZ0wvOVF5ZzZxS1p5d0dyS0hiZ3g1bkdxUFluaQpXRmVGV0dUWGxpL1VIQ0R5dGxid3lhRHAxbXNpVnd2a3BBdEtDTWx1TmRUd3VTaG1Xd0NMSlVFYTg4dzZiRHljCmwyb1lQbDZib0paaGh5V0hXdGNuWFFLQmdIZDhiN1IzT0pZdEg0T2NtVTBHRkxZcVE5Q3R0WWdNbEdBWW5HNDYKVGVDWGVrY0tzWUc5ZTZZZmd3bmpWZFplcFUreFpTWm42Q1RMdDgwWk1ZL0M2eGw1L0JGS1FIaTVteWpNM0M4cwplUXd4YWVRRXBSUUY2NmYvd3UrTWtMcm41U3BPbjFhL0FuSTZFREk1dC8veDFVVER4MytLazE2Ymt4UC92RUYyCmtJRmZBb0dBRmFIWDlndFFhSmFXUFRZVFhIM2k3cjI4VVlZTlBYWVQxSVBacjRnbXpHM0tWN2t1c3NSS1VHQXkKLzF6cStoK0Z4L0czb1RHV0lKcGVRcG9rTGN1UEd5TCtPa1FFMHpLTnVGV1pMamN2U0xnK2o2Y21aWHczMlJqawpVTEpqTStaYjNpbHRoUTVsTjcyODVLckJXUUNNWWhsYUxIblp0MDVTaHkxdlZ5THg1TGc9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0t"
  vpc_security_group_ids = [aws_security_group.security_group.id]

  tag_specifications {
    resource_type = "instance"
    tags = {
        Name = "ec2_instance"
    }
  } 
  user_data = base64encode(<<EOF
#!/bin/bash
sudo yum update -y
sudo yum install -y httpd
sudo systemctl enable httpd
sudo systemctl start httpd
echo "<h1>Infra funcionando direto na EC2!</h1>" > /var/www/html/index.html
EOF
)
}


